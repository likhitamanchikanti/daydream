{"ast":null,"code":"'use strict';\n\nconst Aspect = require('./operation').Aspect;\n\nconst defineAspects = require('./operation').defineAspects;\n\nconst loadCursor = require('../dynamic_loaders').loadCursor;\n\nconst OperationBase = require('./operation').OperationBase;\n\nconst nextObject = require('./common_functions').nextObject;\n\nclass HasNextOperation extends OperationBase {\n  constructor(cursor) {\n    super();\n    this.cursor = cursor;\n  }\n\n  execute(callback) {\n    const cursor = this.cursor;\n    let Cursor = loadCursor();\n\n    if (cursor.s.currentDoc) {\n      return callback(null, true);\n    }\n\n    if (cursor.isNotified()) {\n      return callback(null, false);\n    }\n\n    nextObject(cursor, (err, doc) => {\n      if (err) return callback(err, null);\n      if (cursor.s.state === Cursor.CLOSED || cursor.isDead()) return callback(null, false);\n      if (!doc) return callback(null, false);\n      cursor.s.currentDoc = doc;\n      callback(null, true);\n    });\n  }\n\n}\n\ndefineAspects(HasNextOperation, Aspect.SKIP_SESSION);\nmodule.exports = HasNextOperation;","map":{"version":3,"sources":["C:/Users/mehta/daydream/node_modules/mongodb/lib/operations/has_next.js"],"names":["Aspect","require","defineAspects","loadCursor","OperationBase","nextObject","HasNextOperation","constructor","cursor","execute","callback","Cursor","s","currentDoc","isNotified","err","doc","state","CLOSED","isDead","SKIP_SESSION","module","exports"],"mappings":"AAAA;;AAEA,MAAMA,MAAM,GAAGC,OAAO,CAAC,aAAD,CAAP,CAAuBD,MAAtC;;AACA,MAAME,aAAa,GAAGD,OAAO,CAAC,aAAD,CAAP,CAAuBC,aAA7C;;AACA,MAAMC,UAAU,GAAGF,OAAO,CAAC,oBAAD,CAAP,CAA8BE,UAAjD;;AACA,MAAMC,aAAa,GAAGH,OAAO,CAAC,aAAD,CAAP,CAAuBG,aAA7C;;AACA,MAAMC,UAAU,GAAGJ,OAAO,CAAC,oBAAD,CAAP,CAA8BI,UAAjD;;AAEA,MAAMC,gBAAN,SAA+BF,aAA/B,CAA6C;AAC3CG,EAAAA,WAAW,CAACC,MAAD,EAAS;AAClB;AAEA,SAAKA,MAAL,GAAcA,MAAd;AACD;;AAEDC,EAAAA,OAAO,CAACC,QAAD,EAAW;AAChB,UAAMF,MAAM,GAAG,KAAKA,MAApB;AACA,QAAIG,MAAM,GAAGR,UAAU,EAAvB;;AAEA,QAAIK,MAAM,CAACI,CAAP,CAASC,UAAb,EAAyB;AACvB,aAAOH,QAAQ,CAAC,IAAD,EAAO,IAAP,CAAf;AACD;;AAED,QAAIF,MAAM,CAACM,UAAP,EAAJ,EAAyB;AACvB,aAAOJ,QAAQ,CAAC,IAAD,EAAO,KAAP,CAAf;AACD;;AAEDL,IAAAA,UAAU,CAACG,MAAD,EAAS,CAACO,GAAD,EAAMC,GAAN,KAAc;AAC/B,UAAID,GAAJ,EAAS,OAAOL,QAAQ,CAACK,GAAD,EAAM,IAAN,CAAf;AACT,UAAIP,MAAM,CAACI,CAAP,CAASK,KAAT,KAAmBN,MAAM,CAACO,MAA1B,IAAoCV,MAAM,CAACW,MAAP,EAAxC,EAAyD,OAAOT,QAAQ,CAAC,IAAD,EAAO,KAAP,CAAf;AACzD,UAAI,CAACM,GAAL,EAAU,OAAON,QAAQ,CAAC,IAAD,EAAO,KAAP,CAAf;AACVF,MAAAA,MAAM,CAACI,CAAP,CAASC,UAAT,GAAsBG,GAAtB;AACAN,MAAAA,QAAQ,CAAC,IAAD,EAAO,IAAP,CAAR;AACD,KANS,CAAV;AAOD;;AA1B0C;;AA6B7CR,aAAa,CAACI,gBAAD,EAAmBN,MAAM,CAACoB,YAA1B,CAAb;AAEAC,MAAM,CAACC,OAAP,GAAiBhB,gBAAjB","sourcesContent":["'use strict';\r\n\r\nconst Aspect = require('./operation').Aspect;\r\nconst defineAspects = require('./operation').defineAspects;\r\nconst loadCursor = require('../dynamic_loaders').loadCursor;\r\nconst OperationBase = require('./operation').OperationBase;\r\nconst nextObject = require('./common_functions').nextObject;\r\n\r\nclass HasNextOperation extends OperationBase {\r\n  constructor(cursor) {\r\n    super();\r\n\r\n    this.cursor = cursor;\r\n  }\r\n\r\n  execute(callback) {\r\n    const cursor = this.cursor;\r\n    let Cursor = loadCursor();\r\n\r\n    if (cursor.s.currentDoc) {\r\n      return callback(null, true);\r\n    }\r\n\r\n    if (cursor.isNotified()) {\r\n      return callback(null, false);\r\n    }\r\n\r\n    nextObject(cursor, (err, doc) => {\r\n      if (err) return callback(err, null);\r\n      if (cursor.s.state === Cursor.CLOSED || cursor.isDead()) return callback(null, false);\r\n      if (!doc) return callback(null, false);\r\n      cursor.s.currentDoc = doc;\r\n      callback(null, true);\r\n    });\r\n  }\r\n}\r\n\r\ndefineAspects(HasNextOperation, Aspect.SKIP_SESSION);\r\n\r\nmodule.exports = HasNextOperation;\r\n"]},"metadata":{},"sourceType":"script"}